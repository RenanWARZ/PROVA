<!DOCTYPE html><html lang="pt-BR"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerenciador de Pedidos de Marmitas Fit</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f4f9f4;
    }
    h1 {
      color: #2e7d32;
      text-align: center;
    }
    label, input, select {
      display: block;
      margin-bottom: 10px;
    }
    .restricoes label {
      display: inline-block;
      margin-right: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    button {
      margin: 5px;
      padding: 8px 12px;
      background-color: #2e7d32;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #1b5e20;
    }
    .feedback {
      color: green;
      font-weight: bold;
      margin-bottom: 10px;
    }
  </style>
</head><body>
  <h1>Gerenciador de Pedidos de Marmitas Fit</h1>
  <div class="feedback" id="feedback"></div>
  <form id="pedidoForm">
    <label>Nome do Cliente:
      <input type="text" id="cliente" required>
    </label>
    <label>Tipo de Marmita:
      <select id="tipo">
        <option value="Low Carb">Low Carb</option>
        <option value="Vegetariana">Vegetariana</option>
        <option value="Tradicional">Tradicional</option>
      </select>
    </label>
    <label>Quantidade:
      <input type="number" id="quantidade" min="1" required>
    </label>
    <div class="restricoes">
      Restrições alimentares:<br>
      <label><input type="checkbox" value="Sem glúten"> Sem glúten</label>
      <label><input type="checkbox" value="Sem lactose"> Sem lactose</label>
    </div>
    <button type="submit">Registrar Pedido</button>
  </form>  <table>
    <thead>
      <tr>
        <th>Cliente</th>
        <th>Tipo</th>
        <th>Qtde</th>
        <th>Restrições</th>
        <th>Valor Total</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody id="tabelaPedidos"></tbody>
  </table>  <script>
    let pedidos = JSON.parse(localStorage.getItem("pedidosMarmita")) || [];
    let editandoIndex = null;

    function calcularValorTotal(tipo, quantidade, restricoes) {
      let preco = 25 * quantidade;
      if (tipo === "Vegetariana") preco *= 0.9;
      if (restricoes.length > 0) preco += 5 * quantidade;
      return `R$${preco.toFixed(2)}`;
    }

    function salvarPedidos() {
      localStorage.setItem("pedidosMarmita", JSON.stringify(pedidos));
    }

    function renderizarTabela() {
      const tabela = document.getElementById("tabelaPedidos");
      tabela.innerHTML = "";
      pedidos.forEach((pedido, index) => {
        const linha = `<tr>
          <td>${pedido.cliente}</td>
          <td>${pedido.tipo}</td>
          <td>${pedido.quantidade}</td>
          <td>${pedido.restricoes.join(", ")}</td>
          <td>${pedido.valor}</td>
          <td>
            <button onclick="editarPedido(${index})">Editar</button>
            <button onclick="excluirPedido(${index})">Excluir</button>
          </td>
        </tr>`;
        tabela.innerHTML += linha;
      });
    }

    function editarPedido(index) {
      const pedido = pedidos[index];
      document.getElementById("cliente").value = pedido.cliente;
      document.getElementById("tipo").value = pedido.tipo;
      document.getElementById("quantidade").value = pedido.quantidade;
      document.querySelectorAll(".restricoes input[type='checkbox']").forEach(checkbox => {
        checkbox.checked = pedido.restricoes.includes(checkbox.value);
      });
      editandoIndex = index;
    }

    function excluirPedido(index) {
      pedidos.splice(index, 1);
      salvarPedidos();
      renderizarTabela();
    }

    document.getElementById("pedidoForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const cliente = document.getElementById("cliente").value;
      const tipo = document.getElementById("tipo").value;
      const quantidade = parseInt(document.getElementById("quantidade").value);
      const restricoes = Array.from(document.querySelectorAll(".restricoes input:checked")).map(e => e.value);
      const valor = calcularValorTotal(tipo, quantidade, restricoes);

      const novoPedido = { cliente, tipo, quantidade, restricoes, valor };

      if (editandoIndex !== null) {
        pedidos[editandoIndex] = novoPedido;
        editandoIndex = null;
        document.getElementById("feedback").textContent = "Pedido atualizado com sucesso!";
      } else {
        pedidos.push(novoPedido);
        document.getElementById("feedback").textContent = "Pedido salvo com sucesso!";
      }

      salvarPedidos();
      renderizarTabela();
      this.reset();
    });

    renderizarTabela();
  </script></body></html>
